import{_ as e,a as t,d as n,f as r,i,l as a,n as o,r as s,t as c,u as l,v as u}from"./index-CLweDl6A.js";var d=u(e()),f=u(o());function p(){let{currentUser:e}=c(),[o,u]=(0,d.useState)([]),[p,m]=(0,d.useState)(``),[h,g]=(0,d.useState)(!0),_=(0,d.useRef)();(0,d.useEffect)(()=>{let e=n(t(s,`messages`),l(`timestamp`,`asc`));return a(e,e=>{u(e.docs.map(e=>({id:e.id,...e.data()}))),g(!1)})},[]);let v=async n=>{if(n.preventDefault(),p.trim())try{await i(t(s,`messages`),{text:p,userId:e.uid,userName:e.email.split(`@`)[0],timestamp:r()}),m(``)}catch(e){console.error(`Error sending message:`,e)}};(0,d.useEffect)(()=>{_.current?.scrollIntoView({behavior:`smooth`})},[o]);let y=e=>e?e.toDate().toLocaleTimeString([],{hour:`2-digit`,minute:`2-digit`}):``;return(0,f.jsxs)(`div`,{className:`chat-container`,children:[(0,f.jsxs)(`div`,{className:`chat-header`,children:[(0,f.jsx)(`div`,{className:`chat-header-avatar`,children:e?.email?.charAt(0).toUpperCase()||`U`}),(0,f.jsxs)(`div`,{className:`chat-header-info`,children:[(0,f.jsx)(`h1`,{children:`Chat Room`}),(0,f.jsxs)(`p`,{children:[o.length,` Messages`]})]})]}),(0,f.jsxs)(`div`,{className:`messages-container`,children:[h?(0,f.jsx)(`div`,{className:`loading-indicator`,children:(0,f.jsxs)(`div`,{className:`loading-dots`,children:[(0,f.jsx)(`div`,{className:`loading-dot`}),(0,f.jsx)(`div`,{className:`loading-dot`}),(0,f.jsx)(`div`,{className:`loading-dot`})]})}):o.length===0?(0,f.jsxs)(`div`,{className:`empty-state`,children:[(0,f.jsx)(`div`,{className:`empty-state-icon`,children:`ðŸ’¬`}),(0,f.jsx)(`div`,{className:`empty-state-text`,children:`No messages yet. Start a conversation!`})]}):o.map(t=>(0,f.jsxs)(`div`,{className:`message ${t.userId===e.uid?`message-sent`:`message-received`}`,children:[t.userId!==e.uid&&(0,f.jsx)(`div`,{className:`message-avatar message-avatar-received`,children:t.userName.charAt(0).toUpperCase()}),(0,f.jsxs)(`div`,{className:`message-bubble ${t.userId===e.uid?`message-bubble-sent`:`message-bubble-received`}`,children:[(0,f.jsx)(`div`,{className:`message-text`,children:t.text}),(0,f.jsx)(`div`,{className:`message-timestamp`,children:y(t.timestamp)})]}),t.userId===e.uid&&(0,f.jsx)(`div`,{className:`message-avatar message-avatar-sent`,children:t.userName.charAt(0).toUpperCase()})]},t.id)),(0,f.jsx)(`div`,{ref:_})]}),(0,f.jsxs)(`form`,{onSubmit:v,className:`input-container`,children:[(0,f.jsx)(`div`,{className:`input-wrapper`,children:(0,f.jsx)(`input`,{type:`text`,className:`message-input`,placeholder:`Type a message...`,value:p,onChange:e=>m(e.target.value)})}),(0,f.jsx)(`button`,{type:`submit`,className:`send-button`,disabled:!p.trim(),children:(0,f.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`currentColor`,className:`send-icon`,children:(0,f.jsx)(`path`,{d:`M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z`})})})]})]})}var m=()=>(0,f.jsx)(`div`,{style:{marginTop:`20px`},children:(0,f.jsx)(p,{})});export{m as default};